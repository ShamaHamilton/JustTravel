{% extends 'base.html' %}

{% block title %}
Неактивные бронирования
{% endblock %}

{% block content %}

<nav id="navBar" class="navbar-white">
  {% if request.user.is_authenticated %}
  <ul class="nav-links">
    <li>
      <a href="{% url 'accounts:user_active_reservs' %}">
        {% if active_reservs %}
        Активных бронирований: {{ active_reservs|length }}
        {% endif %}
      </a>
    </li>

    <li>
      <a href="{% url 'accounts:user_inactive_reservs' %}">
        {% if inactive_reservs %}
        Неактивных бронирований: {{ inactive_reservs|length }}
        {% endif %}
      </a>
    </li>

    <li>
      <a href="{% url 'accounts:user_canceled_reservs' %}">
        {% if canceled_reservs %}
        Отмененных бронирований: {{ canceled_reservs|length }}
        {% endif %}
      </a>
    </li>
  </ul>
  <ul class='nav-btn'>
    <li><a href="{% url 'accounts:personal_data' %}">Личные данные</a></li>
  </ul>
  {% endif %}
</nav>


<div class="container">
  <div class="container-info">

    {% if inactive_reservs %}
    <div class="info">
      {% for reserv in inactive_reservs|dictsort:"start_date" %}
      <div class="info-item">
        <h2>{{ reserv.user }}</h2>
        <p>Прибытие: {{ reserv.start_date }}</p>
        <p>Выезд: {{ reserv.end_date }}</p>
        <p>Всего ночей: {{ reserv.days_total }}</p>
        <p>К оплате: {{ reserv.price_total|floatformat:"0g" }} р.</p>
      </div>
      {% endfor %}

    </div>
    {% else %}
    <p>Нет гостей, выезжающих сегодня.</p>
    {% endif %}
  </div>
</div>

<div class="container">
  <div class="container-info">
    {% if inactive_reservs %}
    <div class="info">
      {% for reserv in inactive_reservs|dictsort:"start_date" %}
      <div class="info-item">
        <a href="{{ reserv.apartment.get_absolute_url }}">
          <h2>{{ reserv.apartment }}</h2>
        </a>
        <p>Прибытие: {{ reserv.start_date }}</p>
        <p>Выезд: {{ reserv.end_date }}</p>
        <p>Всего ночей: {{ reserv.days_total }}</p>
        <p>Итого к оплате: {{ reserv.price_total|floatformat:"0g" }} р.</p>
        <p>Оплата наличными на месте.</p>
      </div>
      {% endfor %}
    </div>
    {% endif %}
  </div>
</div>

{% endblock %}