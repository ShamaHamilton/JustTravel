{% extends 'base.html' %}

{% load static %}

{% block title %}
{{ room_details.housing_header }}
{% endblock %}

{% block content %}

<div class="house-details">

  <div class="house-title">
    <h1>{{ room_details.header }}</h1>
    <div class="row">
      <div>
        <i class="fa-solid fa-star"></i>
        <i class="fa-solid fa-star"></i>
        <i class="fa-solid fa-star"></i>
        <i class="fa-solid fa-star-half-alt"></i>
        <i class="fa-regular fa-star"></i>
        <span>Просмотров: {{ room_details.views }}</span>
      </div>
      <div>
        <p>Расположение: {{ room_details.location }}</p>
      </div>
    </div>
  </div>

  <div class="gallery">
    {% if room_details.photo1 %}
    <div class="gallery-img-1"><img src="{{ room_details.photo1.url }}"></div>
    {% endif %}
    {% if room_details.photo2 %}
    <div><img src="{{ room_details.photo2.url }}"></div>
    {% endif %}
    {% if room_details.photo3 %}
    <div><img src="{{ room_details.photo3.url }}"></div>
    {% endif %}
    {% if room_details.photo4 %}
    <div><img src="{{ room_details.photo4.url }}"></div>
    {% endif %}
    {% if room_details.photo5 %}
    <div><img src="{{ room_details.photo5.url }}"></div>
    {% endif %}
  </div>

  <div class="small-details">
    <h2>Хозяин объекта {{ room_details.landlord.get_short_name }}</h2>
    <p>
      Гостей: {{ room_details.guests }} &nbsp; &nbsp;
      Кровати: {{ room_details.beds }} &nbsp; &nbsp;
      Ванная: {{ room_details.bathroom }}
    </p>
    <h4>{{ room_details.price }} р / ночь</h4>
  </div>

  <hr class="line">

  <form class="check-form" method="post">
    {% csrf_token %}
    {% if request.user.is_authenticated %}
    <div>
      <label for="{{ room_reserv.start_date.id_for_label }}">
        {{ room_reserv.start_date.label }}
      </label>
      {{ room_reserv.start_date }}
    </div>
    <div>
      <label for="{{ room_reserv.end_date.id_for_label }}">
        {{ room_reserv.end_date.label }}
      </label>
      {{ room_reserv.end_date }}
    </div>
    <div class="guest-field">
      <label for="{{ room_reserv.guests.id_for_label }}">
        {{ room_reserv.guests.label }}
      </label>
      {{ room_reserv.guests }}
    </div>
    <button type="submit">Забронировать</button>
    {% endif %}
  </form>

  <!-- <ul class="details-list">
    <li><i class="fa-solid fa-house-chimney"></i>Entire Home
      <span>You will have the entire flat for you.</span>
    </li>
    <li><i class="fa-solid fa-paintbrush"></i>Enhanced Clean
      <span>This host has committed to staybnb's cleaning process</span>
    </li>
    <li><i class="fa-solid fa-location-dot"></i>Great Location
      <span>90% of recent guests gave the location a 5 star reting.</span>
    </li>
    <li><i class="fa-solid fa-heart"></i>Great Check-in Experience
      <span>100% of recent guests gave the check-in process a 5 star rating.</span>
    </li>
  </ul> -->

  <hr class="line">

  <p class="home-desc">
    {{ room_details.description }}
  </p>

  <hr class="line">

  <div class="map">
    <h3>Местоположение на карте</h3>
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d548.7258786056058!2d47.03069028642799!3d42.32065588274649!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e1!3m2!1sru!2sru!4v1656957836931!5m2!1sru!2sru"
      width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
      referrerpolicy="no-referrer-when-downgrade">
    </iframe>
    <b>{{ room_details.location }}</b>
    <!-- <p></p> -->
  </div>

  <hr class="line">

  <div class="host">
    <img src="{% static 'images/user-regular.svg' %}">
    <div>
      <h2>Владелец {{ room_details.landlord.get_short_name }}</h2>
      <!-- <p>
        <span>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star"></i>
          <i class="fa-solid fa-star-half-alt"></i>
        </span>
        &nbsp; &nbsp; 245 reviews
        &nbsp; &nbsp; Response rate 100%
        &nbsp; &nbsp; Response time: 60 min
      </p> -->
      <a href="#" class="contact-host">Связаться с владельцем</a>
    </div>
  </div>

</div>
<!-- Передача зарезервированных дат в JS для блокирования доступа в календаре -->
{{ reserv_days_in|json_script:'value1' }}
{{ reserv_days_out|json_script:'value2' }}

{% endblock %}